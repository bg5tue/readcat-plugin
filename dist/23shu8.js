plugin.exports=class a{static ID="vdjkzEKhqhDcXyu7EaC3t";static TYPE=plugin.type.BOOK_SOURCE;static GROUP="默认";static NAME="23书吧";static VERSION="1.2";static VERSION_CODE=3;static PLUGIN_FILE_URL="https://gitee.com/bg5tue/readcat-plugin/raw/master/23shu8.ts.js";static BASE_URL="https://23shu8.net";static REQUIRE={};request;store;cheerio;nanoid;constructor(t){var{request:t,store:e,cheerio:a,nanoid:i}=t;this.request=t,this.store=e,this.cheerio=a,this.nanoid=i}async search(t){t=a.BASE_URL+"/s_"+encodeURI(t),t=(await this.request.get(t,{headers:{referer:a.BASE_URL+"/s_%E5%A4%A7%E5%94%90%E5%AD%BD%E5%AD%90"}})).body,t=this.cheerio(t,{decodeEntities:!1});let s=[];t("div.lists").find("ul").each((t,e)=>{var e=this.cheerio(e),i=e("li.tag2>a");s.push({bookname:i.text(),author:e("li.tag4>a").text(),coverImageUrl:void 0,detailPageUrl:""+a.BASE_URL+i.attr("href"),latestChapterTitle:e("li.tag3>a").text()})});return s}async getDetail(t){t=(await this.request.get(t,{charset:"GBK"})).body,t=this.cheerio(t,{decodeEntities:!1});let i=[];return t("ul.catalogs").find("li").not(".fj").each((t,e)=>{e=this.cheerio(e)("a");i.push({title:e.attr("title"),url:""+a.BASE_URL+e.attr("href")})}),{bookname:t("h1").text(),author:t("div.catalog>div.infos>span:first>a").text(),coverImageUrl:t("div.catalog>img.cover").attr("src"),latestChapterTitle:t("div.catalog>div.infos>span:eq(1)>a").text(),intro:t("div.catalog>p").text(),chapterList:i}}async getTextContent(t){t=(await this.request.get(t.url,{charset:"GBK"})).body;return this.cheerio(t,{decodeEntities:!1})("div#content").text().split("　　").map(t=>"　　"+t)}};