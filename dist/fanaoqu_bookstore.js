plugin.exports=class a{static ID="qqZqL7896pxd9mm2OI2OQ";static TYPE=plugin.type.BOOK_STORE;static GROUP="默认";static NAME="番茄小说网";static VERSION="1.0.0";static VERSION_CODE=1;static PLUGIN_FILE_URL="https://www.fanaoqi.com/a.js";static BASE_URL="https://www.fanaoqi.com";static REQUIRE={maxPageNumber:{type:"number",label:"最大页数",default:3,description:"从书源提取的排行榜页数，书源每页40，默认3页，数值越大提取速度越慢，不建议设置过大"}};static SEARCH_FILTER=void 0;static DEPRECATED=void 0;request;store;cheerio;nanoid;uuid;constructor(t){var{request:t,store:e,cheerio:i,nanoid:a,uuid:s}=t;this.request=t,this.store=e,this.cheerio=i,this.nanoid=a,this.uuid=s}get config(){return{"总排行榜":()=>this.getRank("topallvisit"),"月排行榜":()=>this.getRank("topmonthvisit"),"周排行榜":()=>this.getRank("topweekvisit"),"总推荐榜":()=>this.getRank("topallvote"),"月推荐榜":()=>this.getRank("topmonthvote"),"周推荐榜":()=>this.getRank("topweekvote"),"本站推荐":()=>this.getRank("toptoptime")}}async getRank(t,e=1){var i=a.BASE_URL+`/${t}/${e}.html`,i=(await this.request.get(i)).body;let s=[];return this.cheerio(i,{decodeEntities:!1})("table.table>tbody").children("tr:gt(0)").each(async(t,e)=>{e=this.cheerio(e);s.push({bookname:e("td:eq(1)>a").text(),author:e("td:eq(3)").text(),coverImageUrl:void 0,intro:void 0})}),e<=a.REQUIRE.maxPageNumber.value&&s.push(...await this.getRank(t,e+=1)),s}async getCover(t){t=(await this.request.get(t)).body,t=this.cheerio(t,{decodeEntities:!1})("img.img-thumbnail:first()").attr("src");return t}};